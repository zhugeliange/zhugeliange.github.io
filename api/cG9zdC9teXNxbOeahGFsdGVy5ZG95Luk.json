{"title":"mysql的alter命令","date":"2017-04-04T02:05:49.000Z","slug":"mysql的alter命令","comments":true,"tags":["alter","mysql","修改"],"categories":["mysql"],"updated":"2019-04-04T02:05:49.000Z","content":"<html><head></head><body><h2 id=\"删除表字段\"><a href=\"#删除表字段\" class=\"headerlink\" title=\"删除表字段\"></a>删除表字段</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> 字段名;</span><br></pre></td></tr></tbody></table></figure><ul><li>如果数据表中只剩余一个字段则无法使用 <strong>DROP</strong> 来删除字段。</li></ul><h2 id=\"添加表字段\"><a href=\"#添加表字段\" class=\"headerlink\" title=\"添加表字段\"></a>添加表字段</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> 字段名 <span class=\"built_in\">INT</span>(<span class=\"number\">11</span>);</span><br></pre></td></tr></tbody></table></figure><ul><li>默认情况下，<strong>ADD</strong> 命令下字段会自动添加到数据表字段的末尾。如果需要指定新增字段的位置，可以使用 <strong>MySQL</strong> 提供的关键字 <strong>FIRST</strong> (指定位置为第一列)， <strong>AFTER 字段名</strong>（指定位置为某个字段之后）。</li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加在第一列</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> 字段名 <span class=\"built_in\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">FIRST</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在字段1后面添加字段2</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> 字段<span class=\"number\">2</span> <span class=\"built_in\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">AFTER</span> 字段<span class=\"number\">1</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>如果想重置数据表字段的位置就需要先使用 <strong>DROP</strong> 删除字段然后使用 <strong>ADD</strong> 来添加字段并设置位置。</li></ul><h2 id=\"修改表字段\"><a href=\"#修改表字段\" class=\"headerlink\" title=\"修改表字段\"></a>修改表字段</h2><ul><li><strong>MODIFY</strong> 和 <strong>CHANGE</strong> 都可以用来修改表字段。</li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将指定字段改为 CHAR(10) 类型 且指定注释</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">MODIFY</span> 字段名 <span class=\"built_in\">CHAR</span>(<span class=\"number\">10</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'注释'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将字段1名称改为字段2，且指定为 CHAR(10) 类型</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">CHANGE</span> 字段<span class=\"number\">1</span> 字段<span class=\"number\">2</span> <span class=\"built_in\">BIGINT</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>当添加或修改字段时，可以指定是否包含值或者是否设置默认值。如果不设置默认值，<strong>MySQL</strong> 会自动设置该字段默认为 <strong>NULL</strong>。</li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">MODIFY</span> 字段名 <span class=\"built_in\">BIGINT</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">DEFAULT</span> <span class=\"number\">100</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id=\"修改字段默认值\"><a href=\"#修改字段默认值\" class=\"headerlink\" title=\"修改字段默认值\"></a>修改字段默认值</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 字段名 <span class=\"keyword\">SET</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">1000</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>也可以使用 <strong>DROP</strong> 来删除字段的默认值。</li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 字段名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">DEFAULT</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id=\"修改数据表存储引擎\"><a href=\"#修改数据表存储引擎\" class=\"headerlink\" title=\"修改数据表存储引擎\"></a>修改数据表存储引擎</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改指定表的存储引擎为 MYISAM</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ENGINE</span> = MYISAM;</span><br></pre></td></tr></tbody></table></figure><h2 id=\"修改表名\"><a href=\"#修改表名\" class=\"headerlink\" title=\"修改表名\"></a>修改表名</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将表1的名称修改为表2</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表<span class=\"number\">1</span> <span class=\"keyword\">RENAME</span> <span class=\"keyword\">TO</span> 表<span class=\"number\">2</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id=\"修改索引\"><a href=\"#修改索引\" class=\"headerlink\" title=\"修改索引\"></a>修改索引</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加主键索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> PRIMARY <span class=\"keyword\">KEY</span> (字段名)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加唯一索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> (字段名)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">INDEX</span> (字段名)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加全文索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> FULLTEXT (字段名)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加联合索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">INDEX</span> 联合索引名 (字段<span class=\"number\">1</span>,字段<span class=\"number\">2</span>,字段<span class=\"number\">3</span>)</span><br></pre></td></tr></tbody></table></figure></body></html>","prev":{"title":"mysql处理重复数据","slug":"mysql处理重复数据"},"next":{"title":"那些年碰到的神级sql","slug":"那些年碰到的神级sql"},"link":"/post/mysql的alter命令/","toc":[{"title":"","id":"修改索引","index":"1"}],"reward":true,"copyright":{"license":"原创版权，转载请注明来源 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"沈捷译","link":"<a href=\"/post/mysql的alter命令/\" title=\"mysql的alter命令\">/post/mysql的alter命令/</a>"}}