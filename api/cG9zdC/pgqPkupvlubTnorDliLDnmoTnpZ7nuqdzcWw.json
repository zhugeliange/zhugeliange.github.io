{"title":"那些年碰到的神级sql","date":"2017-04-01T07:19:45.000Z","slug":"那些年碰到的神级sql","comments":true,"tags":["mysql","神级"],"categories":["mysql"],"updated":"2019-03-28T07:55:33.543Z","content":"<html><head></head><body><h2 id=\"计算两日期之间的工作日\"><a href=\"#计算两日期之间的工作日\" class=\"headerlink\" title=\"计算两日期之间的工作日\"></a>计算两日期之间的工作日</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t<span class=\"number\">5</span> * (</span><br><span class=\"line\">\t\t<span class=\"keyword\">DATEDIFF</span>(<span class=\"string\">'2016-10-31'</span>, <span class=\"string\">'2016-10-01'</span>) <span class=\"keyword\">DIV</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t) + <span class=\"keyword\">MID</span>(</span><br><span class=\"line\">\t\t<span class=\"string\">'0123444401233334012222340111123400001234000123440'</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">7</span> * <span class=\"keyword\">WEEKDAY</span>(<span class=\"string\">'2016-10-01'</span>) + <span class=\"keyword\">WEEKDAY</span>(<span class=\"string\">'2016-10-31'</span>) + <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">1</span></span><br><span class=\"line\">\t) + <span class=\"number\">1</span> WorkingDays</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\tDUAL</span><br></pre></td></tr></tbody></table></figure><h2 id=\"最高效的删除重复记录的方法\"><a href=\"#最高效的删除重复记录的方法\" class=\"headerlink\" title=\"最高效的删除重复记录的方法\"></a>最高效的删除重复记录的方法</h2><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> table1 a <span class=\"keyword\">WHERE</span> a.field > (<span class=\"keyword\">SELECT</span> <span class=\"keyword\">MIN</span>(b.field) <span class=\"keyword\">FROM</span> table2 b <span class=\"keyword\">WHERE</span> b.id = a.id);</span><br></pre></td></tr></tbody></table></figure></body></html>","prev":{"title":"mysql高可用架构设计","slug":"mysql高可用架构设计"},"next":{"title":"mysql查漏补缺","slug":"mysql查漏补缺"},"link":"/post/那些年碰到的神级sql/","toc":[{"title":"","id":"最高效的删除重复记录的方法","index":"1"}],"reward":true,"copyright":{"license":"原创版权，转载请注明来源 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"沈捷译","link":"<a href=\"/post/那些年碰到的神级sql/\" title=\"那些年碰到的神级sql\">/post/那些年碰到的神级sql/</a>"}}