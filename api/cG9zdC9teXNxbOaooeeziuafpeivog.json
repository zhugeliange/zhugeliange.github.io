{"title":"mysql模糊查询","date":"2019-09-20T02:54:55.000Z","slug":"mysql模糊查询","comments":true,"tags":["like","mysql","模糊查询"],"categories":["mysql"],"updated":"2019-03-29T03:32:55.000Z","content":"<html><head></head><body><ul><li><p>不加任何匹配的话就等价于 <strong>=</strong>。</p></li><li><p><strong>%</strong> 通配符表示任何字符出现任意次，可以是 <strong>0</strong> 次。</p></li><li><p><strong>_</strong> 通配符表示任何字符出现 <strong>1</strong> 次。</p></li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'test%'</span>; <span class=\"comment\"># 以 test 字符串开头的，包括 test 本身，这种方式可以走索引</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'%test'</span>; <span class=\"comment\"># 以 test 字符串结尾的，包括 test 本身</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'%test%'</span>; <span class=\"comment\"># 包含 test 字符串的，包括 test 本身</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'test_'</span>; <span class=\"comment\"># 以 test 字符串开头的，且后面必须跟着一个字符，这种方式可以走索引</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'_test'</span>; <span class=\"comment\"># 以 test 字符串结尾的，且前面必须跟着一个字符</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'_test_'</span>; <span class=\"comment\"># 包含 test 字符串的，且前面和后面必须分别跟着一个字符</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'%[a-z]%'</span>; <span class=\"comment\"># 包含小写字母的</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"keyword\">user</span> <span class=\"keyword\">WHERE</span> username <span class=\"keyword\">LIKE</span> <span class=\"string\">'%[!0-9]%'</span>; <span class=\"comment\"># 不包含数字的</span></span><br></pre></td></tr></tbody></table></figure><ul><li><p>注意空格也会被识别出来，但是不能匹配 <strong>NULL</strong>。</p></li><li><p>是否区分大小写这个得看 <strong>MySQL</strong> 的配置，或者使用 <strong>BINARY</strong> 操作符来进行二进制的匹配。或者使用 <strong>UPPER</strong> 操作符全部转化成大写字母，然后配合 <strong>CONCAT</strong> 操作符将多个字符串连起来。</p></li></ul><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 中英文混合且忽略英文大小写的模糊匹配</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> username <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(username) <span class=\"keyword\">LIKE</span> <span class=\"built_in\">BINARY</span> <span class=\"keyword\">CONCAT</span>(<span class=\"string\">'%'</span>,<span class=\"keyword\">UPPER</span>(‘a中文b’)，‘%’);</span><br></pre></td></tr></tbody></table></figure></body></html>","next":{"title":"mysql的时间日期类型","slug":"mysql的时间日期类型"},"link":"/post/mysql模糊查询/","reward":true,"copyright":{"license":"原创版权，转载请注明来源 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"沈捷译","link":"<a href=\"/post/mysql模糊查询/\" title=\"mysql模糊查询\">/post/mysql模糊查询/</a>"}}